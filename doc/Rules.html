<h1>Rules and Guidelines</h1>

<p>In order to get the most out of JSMachine there are a few guidelines which should
be followed.</p>

<ol>
<li><p><strong>State Machines have a static structure</strong></p>

<p>The structure (i.e. the diagram) of a state machine should be static and
hence guard and event function should be simple:</p>

<ul><li>They should have simple returns which are either strings (containing
valid state names) or null. Don't return variables.</li>
<li>They should be simple decision structures made with <code>if</code> and <code>switch</code>
statements. Avoid loops.</li>
<li>Never kick off an asynchronous call - they belong in the entry
function of a state.</li></ul></li>
<li><p><strong>Entry function should be async. Work function should be sync.</strong></p>

<p>Although entry functions can return a state name, in order to affect an
immediate state change, this should be avoided as it moves the structure
out of the guard and event functions.</p>

<p>Entry functions should either kick off an asynchronous call or create/start
and register an EventEmitter. Processing code should be placed in the <code>work</code>
(or <code>webwork</code>) function.</p></li>
<li><p><strong>Avoid storing things in the <code>this</code> object</strong></p></li>
</ol>